# ============================================================================
# CastorOS GRUB 配置文件
# ============================================================================
# 多分辨率支持配置
# GRUB 会按顺序尝试这些分辨率，选择第一个可用的：
#   1400x1050 (SXGA+) - ThinkPad T41 高分屏
#   1024x768 (XGA)    - ThinkPad T41 标准屏
#   800x600 (SVGA)    - 后备分辨率
# ============================================================================

set timeout=3
set default=0

# 图形模式配置
# GRUB 会按顺序尝试，选择第一个支持的分辨率
set gfxmode=1400x1050x32,1024x768x32,800x600x32,auto

# 保持图形模式传递给内核
set gfxpayload=keep

# 加载 GRUB 图形终端模块
insmod all_video
insmod gfxterm
terminal_output gfxterm

# ============================================================================
# 启动菜单项
# ============================================================================

menuentry "CastorOS (Auto Resolution)" {
    # gfxpayload=keep 使用 gfxmode 设置的分辨率
    set gfxpayload=keep
    multiboot /boot/castor.bin
    boot
}

menuentry "CastorOS (1400x1050 SXGA+)" {
    set gfxpayload=1400x1050x32
    multiboot /boot/castor.bin
    boot
}

menuentry "CastorOS (1024x768 XGA)" {
    set gfxpayload=1024x768x32
    multiboot /boot/castor.bin
    boot
}

menuentry "CastorOS (800x600 SVGA)" {
    set gfxpayload=800x600x32
    multiboot /boot/castor.bin
    boot
}

menuentry "CastorOS (Text Mode)" {
    set gfxpayload=text
    multiboot /boot/castor.bin
    boot
}
